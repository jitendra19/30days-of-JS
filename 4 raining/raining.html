<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body style="text-align: center;">
    <style></style>
    <div class="variables">
        <label>Speed</label>
        <input type="range" min="1" max="100" name="speed" value="2">
    </div>
    <div id="area">


    </div>
    <script>
        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        var elements = [];
        var intervals = [];
        const number = 500;

        const speed =  document.querySelector('input');
        
        speed.addEventListener('change', ()=>{
            console.log(speed.value)
            for(let i=0; i<number; i++) {
                clearInterval(intervals[i]);
                intervals[i] = setInterval(()=>{
                    elements[i].style.left = getRandomInt(0, 100) + '%';
                                    
                    const topValue = parseInt(elements[i].style.top.split('%')[0]);

                    if(topValue >= 95) {
                        elements[i].style.top = '0%';    
                    } else {
                        elements[i].style.top = getRandomInt(0, 95) + '%';
                    }
                }, speed.value); 
            }
        });


        const area = document.querySelector('#area');
        
        for(let i =0; i<number; i++) {
            elements[i] = document.createElement('div');
            elements[i].style.height = '10px';
            elements[i].style.width = '1px';
            elements[i].style.background = 'green';
            elements[i].style.position = 'fixed';        
            elements[i].style.top = getRandomInt(0, 95) + '%';
            elements[i].style.left = getRandomInt(0, 100) + '%';
            area.appendChild(elements[i]);        

            intervals[i] = setInterval(()=>{
                elements[i].style.left = getRandomInt(0, 100) + '%';
                                
                const topValue = parseInt(elements[i].style.top.split('%')[0]);

                if(topValue >= 95) {
                    elements[i].style.top = '0%';    
                } else {
                    elements[i].style.top = getRandomInt(0, 95) + '%';
                }
            }, 20);
        }                    
    </script>
</body>
</html>